package atividade_3.q_7;

import java.util.ArrayList;
import java.util.List;

public class BingoGame {
    private List<BingoPlayer> players;
    private BingoCaller caller;
    private BingoPlayer winner;
    
    public BingoGame() {
        players = new ArrayList<>();
        caller = new BingoCaller();
    }
    
    public void addPlayer(BingoPlayer player) {
        players.add(player);
        caller.addObserver(player);
    }
    
    public void start() {
        while (winner == null) {
            caller.callNumber();
            try {
                Thread.sleep(1000); // Espera um segundo entre os sorteios
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("O vencedor é " + winner.getName() + "!");
    }
    
    public void setWinner(BingoPlayer player) {
        winner = player;
    }
    
    public void checkForWinner() {
        for (BingoPlayer player : players) {
            if (player.getCard().isComplete()) {
                winner = player;
                return;
            }
        }
    }
}

