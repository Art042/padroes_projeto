package atividade_3.q_7;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

class BingoSystem implements Subject {
    private List<Observer> observers;
    private List<Integer> numerosSorteados;

    public BingoSystem() {
        observers = new ArrayList<>();
        numerosSorteados = new ArrayList<>();
    }

    @Override
    public void registerObserver(Observer observer) {
        observers.add(observer);
    }

    @Override
    public void removeObserver(Observer observer) {
        observers.remove(observer);
    }

    @Override
    public void notifyObservers(int number) {
        for (Observer observer : observers) {
            observer.update(number);
        }
    }

    public void jogar() {
        Random rand = new Random();
        int numeroSorteado;
        do {
            numeroSorteado = rand.nextInt(50) + 1;
            numerosSorteados.add(numeroSorteado);
            System.out.println("Número sorteado: " + numeroSorteado);
            notifyObservers(numeroSorteado);
        } while (!verificarVencedor());
    }

    private boolean verificarVencedor() {
        for (Observer observer : observers) {
            if (((BingoCard)observer).isVencedor()) {
                System.out.println("Cartela vencedora: " + ((BingoCard)observer).getNumeros());
                return true;
            }
        }
        return false;
    }
}
